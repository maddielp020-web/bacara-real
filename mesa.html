<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Mesa de BacarÃ¡ Cubano - FASE 4</title>
    <link rel="stylesheet" href="css/mesa.css">
</head>
<body>
    <div class="mesa-wrapper">
        <img src="img/mesa-fondo.png.jpg" alt="Mesa de BacarÃ¡" class="mesa-imagen">
        <div class="mesa-overlay" id="mesa-overlay">
            <!-- CAJÃ“N -->
            <div class="cajon-cartas" id="cajon-cartas">
                <div class="cartas-restantes" id="cartas-restantes">ğŸƒ 416 cartas</div>
                <div class="estado-barajando" id="estado-barajando">â™»ï¸ Barajando...</div>
            </div>

            <!-- CENTRAL -->
            <div class="area-central">
<div class="mano-jugador" id="mano-corona">
    <div class="icono-fijo corona">ğŸ‘‘</div>
    <div class="carta-placeholder" id="carta1-corona">?</div>
    <div class="carta-placeholder" id="carta2-corona">?</div>
    <div class="puntuacion" id="puntuacion-corona">0</div>
</div>
<div class="mano-jugador" id="mano-retador">
    <div class="icono-fijo retador">âš”ï¸</div>
    <div class="carta-placeholder" id="carta1-retador">?</div>
    <div class="carta-placeholder" id="carta2-retador">?</div>
    <div class="puntuacion" id="puntuacion-retador">0</div>
</div>
            </div>

            <!-- APUESTAS -->
            <div class="apuestas-zone">
                <button class="apostar-btn" onclick="apostar('corona', 100)">Apostar ğŸ‘‘</button>
                <button class="apostar-btn" onclick="apostar('retador', 100)">Apostar âš”ï¸</button>
            </div>

            <!-- ALERTAS -->
            <div class="comision-alert" id="comision-alert">-5% COMISIÃ“N</div>
            
        </div>
    </div>

 <!-- JS MÃ“DULOS -->
<script src="js/mesa-cartas.js"></script>
<script src="js/mesa-apuestas.js"></script>
<script src="js/mesa-historial.js"></script>
<script src="js/mesa-duelo.js"></script>
<script src="js/mesa-ui.js"></script>
       
    <script>
    // ğŸ”§ Fixes crÃ­ticos primero
    window.mesaCartas = window.mesaCartas || { nuevaMano: () => {}, obtenerEstado: () => ({}), obtenerColorPalo: (p) => '#000' };
    window.mesaApuestas = window.mesaApuestas || { procesarResultado: (w) => {}, apostar: (d,c) => {} };
    window.mesaDuelo = window.mesaDuelo || { obtenerEstadoDuelo: () => ({coronaActual: 'leon', retadorActual: 'dragon'}) };
    window.procesarResultado = window.procesarResultado || ((w) => {});

    // ğŸš€ INICIALIZAR (espera 100ms que todos los JS carguen)
    window.addEventListener('load', function() {
        setTimeout(() => {
            crearJugadores();
            window.mesaDuelo?.iniciarDueloInicial?.('leon', 'aguila');
            simularPartida();
            console.log('ğŸ® FASE 4 COMPLETA âœ…');
        }, 100);
    });

    // resto de tus funciones crearJugadores() y simularPartida() IGUALES
</script>

</body>
</html>