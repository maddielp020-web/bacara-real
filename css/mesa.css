/* ==================== MESA.CSS - FASE 4 COMPLETA ==================== */
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
    background: #1a1a2e; min-height: 100vh;
    display: flex; justify-content: center; align-items: center;
    overflow: hidden; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
}

.mesa-wrapper { 
    position: relative; width: 100vw; max-width: 500px; margin: 0 auto; 
}
.mesa-imagen { 
    width: 100%; height: auto; display: block; 
    border-radius: 10px; box-shadow: 0 10px 40px rgba(0,0,0,.5); 
}
.mesa-overlay { 
    position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; 
}

/* ==================== CAJÓN DE CARTAS ==================== */
.cajon-cartas {
    position: absolute; top: 8%; left: 50%; transform: translateX(-50%);
    background: rgba(0,0,0,.9); border: 3px solid #d4af37; border-radius: 15px;
    padding: 12px 20px; text-align: center; backdrop-filter: blur(10px);
    box-shadow: 0 10px 30px rgba(0,0,0,.7); pointer-events: auto;
}
.cartas-restantes { color: #ffffff; font-size: 16px; font-weight: bold; margin-bottom: 4px; }
.estado-barajando { 
    color: #22c55e; font-size: 14px; font-weight: bold; 
    animation: pulso 1.5s infinite; 
}
@keyframes pulso { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }

/* ==================== JUGADORES ==================== */
.jugador {
    position: absolute; background: rgba(0,0,0,.85); border: 3px solid #d4af37;
    border-radius: 12px; padding: 10px 14px; text-align: center;
    backdrop-filter: blur(8px); box-shadow: 0 8px 25px rgba(0,0,0,.6);
    pointer-events: auto; transition: all .3s ease;
}
.jugador:hover { 
    transform: scale(1.05); box-shadow: 0 12px 35px rgba(212,175,55,.4); 
}

.corona-badge { 
    position: absolute; top: -28px; left: 30%; transform: translateX(-50%);
    background: rgba(255,215,0,.95); color: #000; padding: 4px 10px; 
    border-radius: 15px; font-size: 11px; font-weight: bold; z-index: 20;
}
.retador-badge { 
    position: absolute; top: -28px; right: 25%; 
    background: rgba(220,38,38,.95); color: #fff; padding: 4px 10px; 
    border-radius: 15px; font-size: 11px; font-weight: bold; z-index: 20;
}
@keyframes corona-brillo { 
    0%, 100% { box-shadow: 0 4px 15px rgba(255,215,0,.5); } 
    50% { box-shadow: 0 4px 25px rgba(255,215,0,.9); } 
}

.jugador-avatar { font-size: 20px; margin-bottom: 4px; display: block; text-shadow: 0 2px 4px rgba(0,0,0,.8); }
.jugador-nombre { 
    color: #d4af37; font-size: 13px; font-weight: bold; margin-bottom: 6px; 
    text-shadow: 0 1px 3px rgba(0,0,0,.8); 
}
.jugador-fichas { 
    display: flex; align-items: center; justify-content: center; gap: 6px; 
    color: #ffffff; font-size: 16px; font-weight: bold; text-shadow: 0 2px 4px rgba(0,0,0,.9); 
}
.ficha-casino { 
    font-size: 22px; 
    filter: drop-shadow(0 3px 6px rgba(0,0,0,.7)) drop-shadow(0 0 8px rgba(255,215,0,.6)); 
    animation: brillo-ficha 3s ease-in-out infinite; 
}
@keyframes brillo-ficha {
    0%, 100% { filter: drop-shadow(0 3px 6px rgba(0,0,0,.7)) drop-shadow(0 0 6px rgba(255,215,0,.5)); transform: scale(1); }
    50% { filter: drop-shadow(0 3px 6px rgba(0,0,0,.7)) drop-shadow(0 0 12px rgba(255,215,0,.9)); transform: scale(1.05); }
}
.fichas-numero { 
    font-size: 16px; font-family: 'Courier New', monospace; 
    background: linear-gradient(135deg, #c0c0c0, #e0e0e0); 
    -webkit-background-clip: text; -webkit-text-fill-color: transparent; 
}

/* ==================== ÁREA CENTRAL ==================== */
.area-central {
    position: absolute; top: 35%; left: 50%; transform: translate(-50%,-50%);
    width: 60%; height: 25%; display: flex; justify-content: space-between; align-items: center;
    pointer-events: none;
}
.mano-jugador {
    width: 120px; height: 80px; background: rgba(0,0,0,.6); border: 2px solid #888;
    border-radius: 10px; display: flex; flex-direction: column; align-items: center;
    justify-content: center; gap: 5px; pointer-events: auto;
}
.carta-placeholder {
    width: 35px; height: 50px; background: rgba(255,255,255,.1); border: 1px solid #666;
    border-radius: 5px; display: flex; align-items: center; justify-content: center;
    font-size: 12px; color: #ccc; font-weight: bold;
}
.puntuacion { 
    background: rgba(0,0,0,.8); color: #d4af37; padding: 4px 10px; 
    border-radius: 8px; font-weight: bold; font-size: 18px; border: 2px solid #d4af37; 
}

/* ==================== APUESTAS ==================== */
.apuestas-zone {
    position: absolute; bottom: 12%; left: 50%; transform: translateX(-50%);
    display: flex; gap: 20px; pointer-events: auto;
}
.apostar-btn {
    background: linear-gradient(135deg, #16a34a, #15803d); color: white; border: none;
    padding: 12px 24px; border-radius: 25px; font-weight: bold; font-size: 14px;
    cursor: pointer; box-shadow: 0 4px 15px rgba(34,197,94,.4); transition: all .3s;
}
.apostar-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(34,197,94,.6); }

/* ==================== ALERTAS ==================== */
.comision-alert {
    position: absolute; top: 25%; right: 5%; background: rgba(220,38,38,.95);
    color: white; padding: 8px 15px; border-radius: 10px; font-weight: bold;
    font-size: 14px; box-shadow: 0 6px 20px rgba(220,38,38,.5); opacity: 0;
    transform: translateY(-20px); transition: all .5s;
}
.comision-alert.mostrar { opacity: 1; transform: translateY(0); }

/* ==================== HISTORIAL ==================== */

/* ==================== POSICIONES JUGADORES ==================== */
.jugador-leon { top: 46%; left: 2%; transform: translateY(-100%); }
.jugador-dragon { top: 58%; left: 2%; transform: translateY(-50%); }
.jugador-conejo { top: 70%; left: 2%; transform: translateY(0%); }
.jugador-aguila { top: 46%; right: 2%; transform: translateY(-100%); }
.jugador-cobra { top: 58%; right: 2%; transform: translateY(-50%); }
.jugador-buho { top: 70%; right: 2%; transform: translateY(0%); }

/* ==================== RESPONSIVE ==================== */
@media (max-width: 480px) {
    .jugador { padding: 8px 12px; border-width: 2px; }
    .jugador-avatar { font-size: 18px; }
    .jugador-nombre { font-size: 12px; }
    .ficha-casino { font-size: 20px; }
    .fichas-numero { font-size: 14px; }
}

/* BOTÓN HISTORIAL - ESQUINA SUPERIOR IZQUIERDA */
.boton-historial {
    position: absolute;
    top: 4%;
    left: 4%;
    background: #4A90E2;
    color: #ffffff;
    padding: 6px 12px;
    border-radius: 16px;
    font-size: 12px;
    font-weight: bold;
    box-shadow: 0 4px 12px rgba(0,0,0,0.4);
    cursor: default;
    pointer-events: auto;
    display: flex;
    align-items: center;
    gap: 4px;
}
.boton-historial span.icono {
    font-size: 14px;
}

/* EMOJIS REACCIÓN (solo Corona/Retador) */
.emoji-reaccion {
    position: absolute;
    font-size: 28px;
    z-index: 250;
    animation: rebote 0.6s ease-out forwards;
    pointer-events: none;
}
@keyframes rebote {
    0% { 
        transform: scale(0) rotate(-180deg); 
        opacity: 0; 
    }
    50% { 
        transform: scale(1.3) rotate(10deg); 
        opacity: 1; 
    }
    100% { 
        transform: scale(1) rotate(0deg); 
        opacity: 1; 
    }
}
.emoji-corona { top: -50px; left: 50%; transform: translateX(-50%); }
.emoji-retador { top: -50px; right: 20%; }
